<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Headings -->
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
  <!-- Body -->
  <link href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="../assets/prism/prism-okaidia-1.29.0.css">
  <link rel="stylesheet" type="text/css" href="../assets/css/global-min.css">
  <link rel="stylesheet" type="text/css" href="../assets/css/text-min.css">
  <link rel="stylesheet" type="text/css" href="../assets/css/nav-min.css">
  <link rel="stylesheet" type="text/css" href="../assets/css/heading-min.css">
  <link rel="stylesheet" type="text/css" href="../assets/css/martech-article.css">
  <link rel="stylesheet" type="text/css" href="../assets/css/footer-min.css">
  
  <title>MarTech | Adobe Launch Date Formatting</title>

  <meta name="Author" content="Todd Croak-Falen">
  <meta name="Description" content="Adobe Launch date formatting.">

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
  <link rel="manifest" href="../manifest.json">
  <link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="../favicon.ico">
  <meta name="msapplication-config" content="browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

</head>

<body class="body line-numbers">

  <div class="body__project-container">

    <nav class="nav">
      <div class="center__1140 nav__flex">
        <a href="/" class="nav__flex_link font_size_1">
          <div class="nav__flex_text"><i class="fas fa-home nav__flex_icon"></i>Home</div>
        </a>
        <a href="../about-me" class="nav__flex_link font_size_1">
          <div class="nav__flex_text"><i class="fas fa-user-circle nav__flex_icon"></i>About Me</div>
        </a>
        <!-- <a href="../resume_todd_croak-falen.pdf" target="_blank" class="nav__flex_link font_size_1">
          <div class="nav__flex_text"><i class="fas fa-file-alt nav__flex_icon"></i>Résumé</div>
        </a> -->
      </div> <!-- Close .nav__flex -->
    </nav>

    <div class="breadcrumbs breadcrumbs_theme_white content-top">
      <div class="content__center content__center_1440">
        <p class="breadcrumbs__text font_size_body"><a class="breadcrumbs__text link link_theme_black" href="/">Home</a> <span class="breadcrumbs__text">></span> <a class="breadcrumbs__text link link_theme_black" href="../martech">MarTech</a> <span class="breadcrumbs__text">></span> <span class="breadcrumbs__text">Adobe Launch Date Formatting</span></p>
      </div> <!-- Close .content__center_1440 -->
    </div>

    <main class="main">

      <header class="header">
        <div class="heading heading_theme_clear">
          <div class="heading__title-overflow">
            <h1 class="heading__title-tag font_size_4">
              <span class="heading__title-tag_title">Adobe Launch Date Formatting</span>
            </h1>
          </div>
        </div>
        <div class="martech-header__img martech-header__img_canyon-night-sky"></div>
      </header>

      <section>

        <div class="heading heading_theme_black">
          <div class="heading__title-overflow">
            <h2 class="heading__title-tag font_size_3">
              <span class="heading__title-tag_title">Overview</span>
            </h2>
          </div>
        </div>

        <div class="content__center content__center_700">

          <div class="content__block">
          
            <p class="text__main font_size_body">One issue I faced at my job was that the data layer contained different date formats in different site sections &mdash; and sometimes in different portions of the same site section. For the purposes of this example, let&rsquo;s say I work on an airline website, and that early in the booking flow, the departure date is in the <code class="language-javascript">'MM/DD/YY'</code> format. But later in the booking flow, that same date is in the <code class="language-javascript">'YYYY-MM-DD'</code> format.</p>

            <p class="text__main font_size_body">Adobe Analytics wants to receive the <code class="language-javascript">'YYYY-MM-DD'</code> format, which means that the lower funnel is fine .&nbsp;.&nbsp;. but the upper funnel would need some custom logic to reformat it.</p>

            <p class="text__main font_size_body">To further complicate matters, one of our marketing pixels wants that same date in the <code class="language-javascript">'MM/DD/YYYY'</code> (four-digit year) format.</p>

            <p class="text__main font_size_body">The solution:</p>

            <ol class="list__main font_size_body">
              <li class="content__block_li">
                <p class="text__main font_size_body">Standardize the data layer so that all dates are JavaScript <em>date objects</em> instead of strings, giving us the most versatility to reformat any way we like from there.</p>
              </li>
              <li class="content__block_li">
                <p class="text__main font_size_body">Create a set of Adobe Launch data elements that can take in a JavaScript date object and return it in a predetermined format. (One data element per desired format &mdash; one that returns a <code class="language-javascript">'YYYY-MM-DD'</code> string, one that returns a <code class="language-javascript">'MM/DD/YYYY'</code> string, etc.)</p>
              </li>
            </ol>

          </div> <!-- Close .content__block -->

        </div> <!-- Close .content__center content__center_700 -->

      </section>

      <section>

        <div class="heading heading_theme_black">
          <div class="heading__title-overflow">
            <h2 class="heading__title-tag font_size_3">
              <span class="heading__title-tag_title">Syntax</span>
            </h2>
          </div>
        </div>

        <div class="content__center content__center_700">

          <div class="content__block">

            <p class="text__main font_size_body">I&rsquo;ll use the <code class="language-javascript">'YYYY-MM-DD'</code> format as my example. The name of this data element will be <code class="language-javascript">date | YYYY-MM-DD format</code>.</p>

            <p class="text__main font_size_body">The first thing to mention is that <em>you can pass one data element into another</em>. I didn&rsquo;t know that at first, and it was one of those discoveries that kind of blew my mind. I had been thinking of data elements as variables, since that was how we&rsquo;d been using them, but they are really more like functions &mdash; they return a value. And, optionally, they can take in an argument and do something with it before returning that value.</p>

            <p class="text__main font_size_body">Here is our data element&rsquo;s full syntax. (Scroll past to see an explanation of each code block.)</p>

          </div> <!-- Close .content__block -->

        </div> <!-- Close .content__center_700 -->

        <div class="content__center content__center_1140">

            <pre class="code__block"><code class="language-javascript">const inputDate = event;
let outputYYYYMMDD = (!!inputDate) ? inputDate : '';
const formattedDateArr = [];

const formatYYYYMMDD = (singleDateObj) => {
  let yyyy = 'YYYY';
  let mm = 'MM';
  let dd = 'DD';
  if (typeof singleDateObj.getMonth === 'function') {
    yyyy = singleDateObj.getFullYear();
    mm = singleDateObj.getMonth() + 1;
    mm = (mm < 10) ? '0' + mm : mm;
    dd = singleDateObj.getDate();
    dd = (dd < 10) ? '0' + dd : dd;
  }
  return yyyy + '-' + mm + '-' + dd;
}

if (!!inputDate) {
  if (Array.isArray(inputDate)) {
    // If inputDate is an array:
    if (inputDate.length > 0 && typeof inputDate[0].getMonth === 'function') {
      inputDate.forEach((dateObj) => {
        if (typeof dateObj.getMonth === 'function') {
          formattedDateArr.push(formatYYYYMMDD(dateObj));
        }
      });
      outputYYYYMMDD = (formattedDateArr.length > 0) ? formattedDateArr.join() : '';
    } else {
      outputYYYYMMDD = '';
    }
  } else if (typeof inputDate.getMonth === 'function') {
    // If inputDate is an individual date object:
    outputYYYYMMDD = formatYYYYMMDD(inputDate);
  } else if (typeof inputDate === 'string' && inputDate !== 'any') {
    outputYYYYMMDD = '';
  }
}

return outputYYYYMMDD;</code></pre>

        </div> <!-- Close .content__center content__center_1140 -->

        <div class="heading heading_theme_clear">
          <div class="heading__title-overflow">
            <h3 class="heading__title-tag font_size_2">
              <span class="heading__title-tag_title">Explanation</span>
            </h3>
          </div>
        </div>

        <div class="content__center content__center_700">

          <div class="content__block">

            <ul class="list__main font_size_body">
              <li class="content__block_li">
                <p class="text__main font_size_body">Line 1: Declare the variable where the value will be stored. For AEP purposes, do not set any default value. (If there is no value, we want this data element to return <code class="language-javascript">undefined</code> so that its property is omitted from the XDM. If it defaults to <code class="language-javascript">''</code> or <code class="language-javascript">null</code>, the property will be added to the XDM, which could result in a batch ingestion failure.)</p>
              </li>
            </ul>

          </div> <!-- Close .content__block -->

        </div> <!-- Close .content__center content__center_700 -->

      </section>

    </main>

    <footer class="footer footer_theme_black">

      <div class="center__1140">
      
        <div class="footer__icon-row">

          <div class="footer__icon">
            <a href="/" class="footer__icon_link">
              <div class="footer__icon_link-content">
                <i class="fas fa-home footer__icon_icon"></i>
                <p class="footer__icon_text font_size_body">Home</p>
              </div>
            </a>
          </div>

          <div class="footer__icon">
            <a href="https://www.github.com/toddcf" target="_blank" class="footer__icon_link">
              <div class="footer__icon_link-content">
                <i class="fab fa-github footer__icon_icon"></i>
                <p class="footer__icon_text font_size_body">GitHub</p>
              </div>
            </a>
          </div>

          <div class="footer__icon">
            <a href="https://www.linkedin.com/in/toddcf" target="_blank" class="footer__icon_link">
              <div class="footer__icon_link-content">
                <i class="fab fa-linkedin footer__icon_icon"></i>
                <p class="footer__icon_text font_size_body">LinkedIn</p>
              </div>
            </a>
          </div>

          <div class="footer__icon">
            <a href="resume_todd_croak-falen.pdf" target="_blank" class="footer__icon_link">
              <div class="footer__icon_link-content">
                <i class="fas fa-file-alt footer__icon_icon"></i>
                <p class="footer__icon_text font_size_body">Résumé</p>
                <p class="footer__icon_text font_size_body">(PDF with contact info)</p>
              </div>
            </a>
          </div>
          
        </div> <!-- Close .footer-icon__row -->

        <div class="footer__copyright">
          <p class="footer__copyright_text font_size_body">&copy; Copyright 2016 <span class="currentYear"></span>Todd Croak-Falen</p>
        </div>

      </div> <!-- Close .center__1140 -->

    </footer>

  </div> <!-- Close .body__project-container -->

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

  <!-- Waypoints -->
  <script src="../assets/js/jquery.waypoints.min.js"></script>

  <!-- Prism -->
  <script src="../assets/prism/prism-okaidia-1.29.0.js"></script>
  
  <!-- Custom JavaScript -->
  <script src="../assets/js/global-min.js"></script>
  <script src="../assets/js/footer-min.js"></script>

</body>

</html>